name: test
on:
  workflow_call:
    outputs:
      ${{RELEASE_VERSION}}
jobs:
  test:
    runs-on: ubuntu-latest
    outputs:
      RELEASE_VERSION: ${{steps.set_output.relase_version}}
    steps:
    - name: Set the release version manually
      id: set_version
      run: "RELEASE_VERSION=${{ inputs.RELEASE_VERSION || '1.0.1' }}"

    - name: Set the release version as output
      id: set_output
      run: "::set-output name=release_version::$RELEASE_VERSION"

  call-github-action:
    needs: test
    uses: ./.github/workflows/publish-azure-extension.yml